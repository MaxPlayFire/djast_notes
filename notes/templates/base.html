{% load static %}
<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <title>{% block title %}–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'notes/style.css' %}">
</head>

<body>
    {% if user.is_authenticated %}
    <form method="post" action="{% url 'logout' %}" class="logout-form">
        {% csrf_token %}
        <button>–í–∏–π—Ç–∏</button>
    </form>


    <button class="profile-button" onclick="location.href='{% url 'profile' %}'"> {{ profile.user.username }}
        {% if profile.avatar %}
        <img src="{{ profile.avatar.url }}" alt="–ê–≤–∞—Ç–∞—Ä–∫–∞" class="profile-ava">
        {% else %}
        <div class="default-ava">{{ profile.user.username|first|upper }}</div>
        {% endif %}

        {% else %}



    <form method="post" action="{% url 'login' %}" class="logout-form">
        {% csrf_token %}
        <button>–£–≤—ñ–π—Ç–∏</button>
    </form>
    <form method="post" action="{% url 'register' %}" class="logout-form">
        {% csrf_token %}
        <button>–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
    </form>
    {% endif %}
    <button id="themeToggle">‚óë</button> {% if messages %}
    <ul class="messages">
        {% for message in messages %}
        <li{% if message.tags %} class="{{ message.tags }}" {% endif %}>{{ message }}</li>
            {% endfor %}
    </ul>
    {% endif %} {% block content %} {% endblock %}

    <script>
        const btn = document.getElementById("themeToggle");
        const savedTheme = localStorage.getItem("theme");
        if (savedTheme === "light") {
            document.body.setAttribute("data-theme", "light");
            btn.innerHTML = "üåô";
        } else {
            btn.innerHTML = "‚òÄÔ∏è";
        }

        btn.addEventListener("click", () => {
            if (document.body.getAttribute("data-theme") === "light") {
                document.body.removeAttribute("data-theme");
                localStorage.setItem("theme", "dark");
                btn.innerHTML = "‚òÄÔ∏è";
            } else {
                document.body.setAttribute("data-theme", "light");
                localStorage.setItem("theme", "light");
                btn.innerHTML = "üåô";
            }
        });
    </script>
</body>

</html>